{
  "version": "1.1.0",
  "notes": "Extended taxonomy model: properties carry DB source paths; states, events and actions include explicit transition and allowed-state metadata.",
  "concepts": {
    "Invoice": {
      "id": "Invoice",
      "name": "Invoice",
      "description": "A request for payment",
      "properties": [
        {
          "id": "amount",
          "name": "Amount",
          "dataType": "number",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "amount",
              "path": "app_db.invoices.amount"
            }
          ]
        },
        {
          "id": "vendorId",
          "name": "Vendor ID",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "vendor_id",
              "path": "app_db.invoices.vendor_id"
            }
          ]
        },
        {
          "id": "date",
          "name": "Invoice Date",
          "dataType": "datetime",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "issued_at",
              "path": "app_db.invoices.issued_at"
            }
          ]
        },
        {
          "id": "status",
          "name": "Status",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "status",
              "path": "app_db.invoices.status"
            }
          ]
        }
      ],
      "states": [
        {
          "id": "Draft",
          "name": "Draft",
          "allowedTransitions": [
            "Submitted"
          ]
        },
        {
          "id": "Submitted",
          "name": "Submitted",
          "allowedTransitions": [
            "Approved",
            "Rejected"
          ]
        },
        {
          "id": "Approved",
          "name": "Approved",
          "allowedTransitions": [
            "Paid"
          ]
        },
        {
          "id": "Paid",
          "name": "Paid",
          "allowedTransitions": []
        }
      ],
      "relatedEvents": [
        "InvoiceCreated",
        "InvoiceSubmitted",
        "InvoiceApproved",
        "InvoicePaid"
      ],
      "relatedActions": [
        "SubmitInvoice",
        "ApproveInvoice",
        "PayInvoice"
      ]
    },
    "PurchaseOrder": {
      "id": "PurchaseOrder",
      "name": "PurchaseOrder",
      "description": "An order to purchase goods or services",
      "properties": [
        "appsthink_crm.company_name",
        "appsthink_crm.address",
        "crimping_process.SAP_ID"
      ],
      "states": [
        {
          "id": "Created",
          "name": "Created",
          "allowedTransitions": [
            "Approved",
            "Cancelled"
          ]
        },
        {
          "id": "Approved",
          "name": "Approved",
          "allowedTransitions": [
            "Fulfilled"
          ]
        },
        {
          "id": "Cancelled",
          "name": "Cancelled",
          "allowedTransitions": []
        }
      ],
      "relatedEvents": [
        "PurchaseOrderCreated",
        "PurchaseOrderApproved"
      ],
      "relatedActions": [
        "CreatePO",
        "ApprovePO",
        "CancelPO"
      ]
    },
    "InventoryItem": {
      "id": "InventoryItem",
      "name": "InventoryItem",
      "description": "A physical or virtual item in inventory",
      "properties": [
        {
          "id": "sku",
          "name": "SKU",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "sku",
              "path": "app_db.inventory.sku"
            }
          ]
        },
        {
          "id": "quantity",
          "name": "Quantity",
          "dataType": "number",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "qty",
              "path": "app_db.inventory.qty"
            }
          ]
        },
        {
          "id": "location",
          "name": "Location",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "location",
              "path": "app_db.inventory.location"
            }
          ]
        },
        {
          "id": "cost",
          "name": "Cost",
          "dataType": "number",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "cost",
              "path": "app_db.inventory.cost"
            }
          ]
        }
      ],
      "states": [
        {
          "id": "InStock",
          "name": "In Stock",
          "allowedTransitions": [
            "Reserved",
            "OutOfStock"
          ]
        },
        {
          "id": "Reserved",
          "name": "Reserved",
          "allowedTransitions": [
            "Picked",
            "Returned"
          ]
        },
        {
          "id": "OutOfStock",
          "name": "Out Of Stock",
          "allowedTransitions": []
        }
      ],
      "relatedEvents": [
        "InventoryAdjusted",
        "InventoryReceived"
      ],
      "relatedActions": [
        "AdjustInventory",
        "TransferInventory"
      ]
    }
  },
  "events": {},
  "actions": {
    "SubmitInvoice": {
      "id": "SubmitInvoice",
      "name": "Submit Invoice",
      "concept": "Invoice",
      "description": "Submit an invoice (Draft -> Submitted)",
      "parameters": [
        "invoiceId",
        "submittedBy"
      ],
      "allowedStates": [
        "Draft"
      ],
      "workerCapability": "InvoiceSubmission"
    },
    "ApproveInvoice": {
      "id": "ApproveInvoice",
      "name": "Approve Invoice",
      "concept": "Invoice",
      "description": "Approve invoice for payment",
      "parameters": [
        "invoiceId",
        "approverId"
      ],
      "allowedStates": [
        "Submitted"
      ],
      "workerCapability": "ApprovalManagement"
    },
    "PayInvoice": {
      "id": "PayInvoice",
      "name": "Pay Invoice",
      "concept": "Invoice",
      "description": "Pay an approved invoice",
      "parameters": [
        "invoiceId",
        "paymentMethod"
      ],
      "allowedStates": [
        "Approved"
      ],
      "workerCapability": "Payments"
    },
    "AdjustInventory": {
      "id": "AdjustInventory",
      "name": "Adjust Inventory",
      "concept": "InventoryItem",
      "description": "Adjust inventory quantity",
      "parameters": [
        "sku",
        "quantityDelta",
        "reason"
      ],
      "allowedStates": [
        "InStock",
        "Reserved"
      ],
      "workerCapability": "InventoryManagement"
    },
    "ef4212aa-0fbe-4e40-a6d0-ea00bbd66d63": {
      "id": "ef4212aa-0fbe-4e40-a6d0-ea00bbd66d63",
      "name": "Appsthink crm to extract_contact matching",
      "description": "using {{connect_node_2.phone_number}} select all matching records in extract contact data {{db.extract_contact.phoneNumbers_value}}",
      "query": "SELECT * FROM extract_contact WHERE phoneNumbers_value = {{connect_node_2.phone_number}}",
      "variableMappings": {
        "template": "SELECT * FROM extract_contact WHERE phoneNumbers_value = '768790'",
        "executedQuery": "SELECT * FROM extract_contact WHERE phoneNumbers_value = '768790'",
        "dbAttributes": [
          {
            "table": "extract_contact",
            "column": "phoneNumbers_value"
          }
        ],
        "eventVariables": [
          "{{appsthink_crm:phone_number:added.data.field1}}",
          "{{appsthink_crm:phone_number:added.data.field2}}"
        ],
        "_exampleOutputs": [
          {
            "id": 4,
            "emails_value": "fdesc",
            "phoneNumbers_value": "768790",
            "role": "admin",
            "created_at": "2025-12-01T20:41:44.000Z"
          }
        ]
      },
      "eventBindings": [
        {
          "eventId": "appsthink_crm:phone_number:added",
          "eventName": "appsthink_crm:phone_number:added",
          "eventDescription": "",
          "payloadSchema": {
            "primaryFields": {
              "phone_number": {
                "type": "string",
                "description": "phone_number (string)",
                "sample": "9384829381",
                "path": "phone_number"
              }
            },
            "metadataFields": {}
          },
          "selectedFields": [
            {
              "name": "phone_number",
              "path": "phone_number"
            }
          ]
        }
      ]
    },
    "f5526e46-87d1-4725-b8bf-01ee27fb7245": {
      "id": "f5526e46-87d1-4725-b8bf-01ee27fb7245",
      "name": "testcase 1",
      "description": "",
      "query": "{{added.field}}",
      "eventBindings": [
        {
          "eventId": "appsthink_crm:phone_number:added",
          "eventName": "appsthink_crm:phone_number:added",
          "eventDescription": "",
          "payloadSchema": {
            "primaryFields": {
              "field": {
                "type": "string",
                "description": "field (string)",
                "sample": "phone_number",
                "path": "detail.field"
              },
              "module": {
                "type": "string",
                "description": "module (string)",
                "sample": "appsthink_crm",
                "path": "detail.module"
              },
              "value": {
                "type": "string",
                "description": "value (string)",
                "sample": "yvib",
                "path": "detail.value"
              }
            },
            "metadataFields": {
              "id": {
                "type": "string",
                "description": "id (metadata)",
                "sample": "035f6a4b-b84e-447a-b843-60ac949d6d73"
              },
              "event": {
                "type": "string",
                "description": "event (metadata)",
                "sample": "appsthink_crm:field:phone_number:added"
              },
              "module": {
                "type": "string",
                "description": "module (metadata)",
                "sample": "appsthink_crm"
              },
              "ts": {
                "type": "integer",
                "description": "ts (metadata)",
                "sample": 1766353264303
              },
              "field": {
                "type": "string",
                "description": "field (metadata)",
                "sample": "phone_number"
              },
              "canonicalEvent": {
                "type": "string",
                "description": "canonicalEvent (metadata)",
                "sample": "appsthink_crm:phone_number:added"
              }
            }
          }
        }
      ],
      "variableMappings": {}
    },
    "eefd103c-7eed-4045-ae2d-140b4a2bd226": {
      "id": "eefd103c-7eed-4045-ae2d-140b4a2bd226",
      "name": "crm to extract contacts",
      "description": "with input phone number in appsthink crm  I want find all the email and phone information in extract contact table which matches both Phone number and email",
      "query": "SELECT emails_value, phoneNumbers_value FROM extract_contact WHERE phoneNumbers_value = {{appsthink_crm:phone_number:added.value}}",
      "eventBindings": [
        {
          "eventId": "appsthink_crm:phone_number:added",
          "eventName": "appsthink_crm:phone_number:added",
          "eventDescription": "",
          "payloadSchema": {
            "primaryFields": {
              "field": {
                "type": "string",
                "description": "field (string)",
                "sample": "phone_number",
                "path": "detail.field"
              },
              "module": {
                "type": "string",
                "description": "module (string)",
                "sample": "appsthink_crm",
                "path": "detail.module"
              },
              "value": {
                "type": "string",
                "description": "value (string)",
                "sample": "yvib",
                "path": "detail.value"
              }
            },
            "metadataFields": {
              "id": {
                "type": "string",
                "description": "id (metadata)",
                "sample": "035f6a4b-b84e-447a-b843-60ac949d6d73"
              },
              "event": {
                "type": "string",
                "description": "event (metadata)",
                "sample": "appsthink_crm:field:phone_number:added"
              },
              "module": {
                "type": "string",
                "description": "module (metadata)",
                "sample": "appsthink_crm"
              },
              "ts": {
                "type": "integer",
                "description": "ts (metadata)",
                "sample": 1766353264303
              },
              "field": {
                "type": "string",
                "description": "field (metadata)",
                "sample": "phone_number"
              },
              "canonicalEvent": {
                "type": "string",
                "description": "canonicalEvent (metadata)",
                "sample": "appsthink_crm:phone_number:added"
              }
            }
          }
        },
        {
          "eventId": "appsthink_crm:email:added",
          "eventName": "appsthink_crm:email:added",
          "eventDescription": "",
          "payloadSchema": {
            "primaryFields": {
              "field": {
                "type": "string",
                "description": "field (string)",
                "sample": "email",
                "path": "detail.field"
              },
              "module": {
                "type": "string",
                "description": "module (string)",
                "sample": "appsthink_crm",
                "path": "detail.module"
              },
              "value": {
                "type": "string",
                "description": "value (string)",
                "sample": "sca",
                "path": "detail.value"
              }
            },
            "metadataFields": {
              "id": {
                "type": "string",
                "description": "id (metadata)",
                "sample": "035e4f2a-8d9b-4d93-950b-1a1eebbb9539"
              },
              "event": {
                "type": "string",
                "description": "event (metadata)",
                "sample": "appsthink_crm:field:email:added"
              },
              "module": {
                "type": "string",
                "description": "module (metadata)",
                "sample": "appsthink_crm"
              },
              "domain": {
                "type": "string",
                "description": "domain (metadata)",
                "sample": "appsthink_crm"
              },
              "version": {
                "type": "integer",
                "description": "version (metadata)",
                "sample": 1
              },
              "ts": {
                "type": "integer",
                "description": "ts (metadata)",
                "sample": 1766347215683
              },
              "publishedTs": {
                "type": "integer",
                "description": "publishedTs (metadata)",
                "sample": 1766347215480
              },
              "status": {
                "type": "string",
                "description": "status (metadata)",
                "sample": "published"
              },
              "attempts": {
                "type": "integer",
                "description": "attempts (metadata)",
                "sample": 0
              },
              "level": {
                "type": "string",
                "description": "level (metadata)",
                "sample": "technical"
              },
              "field": {
                "type": "string",
                "description": "field (metadata)",
                "sample": "email"
              },
              "canonicalEvent": {
                "type": "string",
                "description": "canonicalEvent (metadata)",
                "sample": "appsthink_crm:email:added"
              },
              "actor.user": {
                "type": "string",
                "description": "user (actor metadata)",
                "sample": "Admin",
                "path": "actor.user"
              },
              "actor.role": {
                "type": "string",
                "description": "role (actor metadata)",
                "sample": "admin",
                "path": "actor.role"
              },
              "actor.group": {
                "type": "string",
                "description": "group (actor metadata)",
                "sample": "Administrators",
                "path": "actor.group"
              },
              "producer.service": {
                "type": "string",
                "description": "service (producer metadata)",
                "sample": "crud-ui",
                "path": "producer.service"
              },
              "producer.instance": {
                "type": "string",
                "description": "instance (producer metadata)",
                "sample": "localhost:8001",
                "path": "producer.instance"
              }
            }
          }
        }
      ],
      "variableMappings": {
        "parserPaths": [
          {
            "path": "rows[0].phoneNumbers_value",
            "varName": "phoneNumbers_value",
            "sampleValue": "yvib",
            "field": null
          },
          {
            "path": "appsthink_crm:phone_number:added.detail.value",
            "varName": "appsthinkphone.value",
            "field": "value"
          }
        ],
        "executedQuery": "SELECT emails_value, phoneNumbers_value FROM extract_contact WHERE phoneNumbers_value = 'vedcsc'",
        "template": "SELECT emails_value, phoneNumbers_value FROM extract_contact WHERE phoneNumbers_value = {{appsthink_crm:phone_number:added.value}}"
      },
      "exampleOutputs": [
        {
          "eventName": "appsthink_crm:phone_number:added",
          "sampleIndex": 2,
          "testedAt": "2025-12-24T12:13:40.962Z",
          "payload": {
            "id": "43d11e2d-e605-4ac1-b7a9-bdb2be51252e",
            "event": "appsthink_crm:field:phone_number:added",
            "module": "appsthink_crm",
            "domain": "appsthink_crm",
            "version": 1,
            "detail": {
              "field": "phone_number",
              "module": "appsthink_crm",
              "value": "onkkl"
            },
            "ts": 1766352250978,
            "producer": {
              "service": "crud-ui",
              "instance": "localhost:8001"
            },
            "actor": {
              "user": "Admin",
              "role": "admin",
              "group": "Administrators",
              "organization": "Prudential"
            },
            "status": "published",
            "attempts": 0,
            "level": "technical",
            "field": "phone_number",
            "canonicalEvent": "appsthink_crm:phone_number:added",
            "publishedTs": 1766352251573
          },
          "executedQuery": "SELECT * FROM extract_contact WHERE phoneNumbers_value = 'onkkl'",
          "rowCount": 1,
          "sampleData": [
            {
              "id": 3,
              "emails_value": "nfsaf@awfds.com",
              "phoneNumbers_value": "onkkl",
              "role": "admin",
              "created_at": "2025-12-01T20:25:56.000Z"
            }
          ]
        }
      ]
    },
    "f605a2ad-b4b3-4714-958b-9b2db2d63dba": {
      "id": "f605a2ad-b4b3-4714-958b-9b2db2d63dba",
      "name": "crm phone checker",
      "description": "i want to find all the phone number related to incoming crm phone number in the extract contact table",
      "query": "SELECT ec.phoneNumbers_value \nFROM extract_contact ec \nWHERE ec.phoneNumbers_value IN (SELECT phone_number FROM appsthink_crm);",
      "eventBindings": [
        {
          "eventId": "appsthink_crm:phone_number:added",
          "eventName": "appsthink_crm:phone_number:added",
          "eventDescription": "",
          "payloadSchema": {
            "primaryFields": {
              "phone_number": {
                "type": "string",
                "description": "phone_number (string)",
                "sample": "9384829381"
              }
            },
            "metadataFields": {}
          },
          "selectedFields": [
            {
              "name": "phone_number",
              "path": "phone_number"
            }
          ]
        }
      ],
      "variableMappings": {
        "executedQuery": "SELECT ec.phoneNumbers_value \nFROM extract_contact ec \nWHERE ec.phoneNumbers_value IN (SELECT phone_number FROM appsthink_crm);",
        "template": "SELECT ec.phoneNumbers_value \nFROM extract_contact ec \nWHERE ec.phoneNumbers_value IN (SELECT phone_number FROM appsthink_crm);"
      },
      "createdAt": "2025-12-24T20:04:30.740Z"
    }
  },
  "capabilities": {
    "VendorManagement": {
      "id": "VendorManagement",
      "name": "Vendor Management",
      "description": "Manage vendor relationships and transactions",
      "actions": [
        "ReconcileInvoice",
        "ApproveInvoice"
      ]
    },
    "InventoryManagement": {
      "id": "InventoryManagement",
      "name": "Inventory Management",
      "description": "Manage inventory levels and movements",
      "actions": [
        "AdjustInventory",
        "TransferInventory"
      ]
    },
    "ApprovalManagement": {
      "id": "ApprovalManagement",
      "name": "Approval Management",
      "description": "Manage approval workflows and decisions",
      "actions": [
        "ApproveInvoice",
        "ApprovePO",
        "RejectInvoice"
      ]
    }
  }
}