{
  "version": "1.1.0",
  "notes": "Extended taxonomy model: properties carry DB source paths; states, events and actions include explicit transition and allowed-state metadata.",
  "concepts": {
    "Invoice": {
      "id": "Invoice",
      "name": "Invoice",
      "description": "A request for payment",
      "properties": [
        {
          "id": "amount",
          "name": "Amount",
          "dataType": "number",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "amount",
              "path": "app_db.invoices.amount"
            }
          ]
        },
        {
          "id": "vendorId",
          "name": "Vendor ID",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "vendor_id",
              "path": "app_db.invoices.vendor_id"
            }
          ]
        },
        {
          "id": "date",
          "name": "Invoice Date",
          "dataType": "datetime",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "issued_at",
              "path": "app_db.invoices.issued_at"
            }
          ]
        },
        {
          "id": "status",
          "name": "Status",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "invoices",
              "column": "status",
              "path": "app_db.invoices.status"
            }
          ]
        }
      ],
      "states": [
        {
          "id": "Draft",
          "name": "Draft",
          "allowedTransitions": [
            "Submitted"
          ]
        },
        {
          "id": "Submitted",
          "name": "Submitted",
          "allowedTransitions": [
            "Approved",
            "Rejected"
          ]
        },
        {
          "id": "Approved",
          "name": "Approved",
          "allowedTransitions": [
            "Paid"
          ]
        },
        {
          "id": "Paid",
          "name": "Paid",
          "allowedTransitions": []
        }
      ],
      "relatedEvents": [
        "InvoiceCreated",
        "InvoiceSubmitted",
        "InvoiceApproved",
        "InvoicePaid"
      ],
      "relatedActions": [
        "SubmitInvoice",
        "ApproveInvoice",
        "PayInvoice"
      ]
    },
    "PurchaseOrder": {
      "id": "PurchaseOrder",
      "name": "PurchaseOrder",
      "description": "An order to purchase goods or services",
      "properties": [
        "appsthink_crm.company_name",
        "appsthink_crm.address",
        "crimping_process.SAP_ID"
      ],
      "states": [
        {
          "id": "Created",
          "name": "Created",
          "allowedTransitions": [
            "Approved",
            "Cancelled"
          ]
        },
        {
          "id": "Approved",
          "name": "Approved",
          "allowedTransitions": [
            "Fulfilled"
          ]
        },
        {
          "id": "Cancelled",
          "name": "Cancelled",
          "allowedTransitions": []
        }
      ],
      "relatedEvents": [
        "PurchaseOrderCreated",
        "PurchaseOrderApproved"
      ],
      "relatedActions": [
        "CreatePO",
        "ApprovePO",
        "CancelPO"
      ]
    },
    "InventoryItem": {
      "id": "InventoryItem",
      "name": "InventoryItem",
      "description": "A physical or virtual item in inventory",
      "properties": [
        {
          "id": "sku",
          "name": "SKU",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "sku",
              "path": "app_db.inventory.sku"
            }
          ]
        },
        {
          "id": "quantity",
          "name": "Quantity",
          "dataType": "number",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "qty",
              "path": "app_db.inventory.qty"
            }
          ]
        },
        {
          "id": "location",
          "name": "Location",
          "dataType": "string",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "location",
              "path": "app_db.inventory.location"
            }
          ]
        },
        {
          "id": "cost",
          "name": "Cost",
          "dataType": "number",
          "sources": [
            {
              "db": "app_db",
              "table": "inventory",
              "column": "cost",
              "path": "app_db.inventory.cost"
            }
          ]
        }
      ],
      "states": [
        {
          "id": "InStock",
          "name": "In Stock",
          "allowedTransitions": [
            "Reserved",
            "OutOfStock"
          ]
        },
        {
          "id": "Reserved",
          "name": "Reserved",
          "allowedTransitions": [
            "Picked",
            "Returned"
          ]
        },
        {
          "id": "OutOfStock",
          "name": "Out Of Stock",
          "allowedTransitions": []
        }
      ],
      "relatedEvents": [
        "InventoryAdjusted",
        "InventoryReceived"
      ],
      "relatedActions": [
        "AdjustInventory",
        "TransferInventory"
      ]
    }
  },
  "events": {},
  "actions": {
    "SubmitInvoice": {
      "id": "SubmitInvoice",
      "name": "Submit Invoice",
      "concept": "Invoice",
      "description": "Submit an invoice (Draft -> Submitted)",
      "parameters": [
        "invoiceId",
        "submittedBy"
      ],
      "allowedStates": [
        "Draft"
      ],
      "workerCapability": "InvoiceSubmission"
    },
    "ApproveInvoice": {
      "id": "ApproveInvoice",
      "name": "Approve Invoice",
      "concept": "Invoice",
      "description": "Approve invoice for payment",
      "parameters": [
        "invoiceId",
        "approverId"
      ],
      "allowedStates": [
        "Submitted"
      ],
      "workerCapability": "ApprovalManagement"
    },
    "PayInvoice": {
      "id": "PayInvoice",
      "name": "Pay Invoice",
      "concept": "Invoice",
      "description": "Pay an approved invoice",
      "parameters": [
        "invoiceId",
        "paymentMethod"
      ],
      "allowedStates": [
        "Approved"
      ],
      "workerCapability": "Payments"
    },
    "AdjustInventory": {
      "id": "AdjustInventory",
      "name": "Adjust Inventory",
      "concept": "InventoryItem",
      "description": "Adjust inventory quantity",
      "parameters": [
        "sku",
        "quantityDelta",
        "reason"
      ],
      "allowedStates": [
        "InStock",
        "Reserved"
      ],
      "workerCapability": "InventoryManagement"
    },
    "ef4212aa-0fbe-4e40-a6d0-ea00bbd66d63": {
      "id": "ef4212aa-0fbe-4e40-a6d0-ea00bbd66d63",
      "name": "Crm to delivery",
      "description": "I want to match a phone number between appsthink CRM an extract contact modules",
      "query": "SELECT * FROM appsthink_crm AS ac INNER JOIN extract_contact AS ec ON ac.phone_number = ec.phoneNumbers_value"
    },
    "1eec6888-de8f-4443-9602-39de2abc459f": {
      "id": "1eec6888-de8f-4443-9602-39de2abc459f",
      "name": "crm to extract contact",
      "description": "",
      "query": ""
    },
    "f5526e46-87d1-4725-b8bf-01ee27fb7245": {
      "id": "f5526e46-87d1-4725-b8bf-01ee27fb7245",
      "name": "testcase 1",
      "description": "",
      "query": "",
      "eventBindings": [],
      "variableMappings": {}
    },
    "eefd103c-7eed-4045-ae2d-140b4a2bd226": {
      "id": "eefd103c-7eed-4045-ae2d-140b4a2bd226",
      "name": "test1",
      "description": "When are CRM email and phone number is added I want find all the related information in extract contact table which matches",
      "query": "",
      "eventBindings": [
        {
          "eventId": "appsthink_crm:email:added",
          "eventName": "appsthink_crm:email:added",
          "eventDescription": "",
          "payloadSchema": {
            "id": {
              "type": "string",
              "description": "id (string)",
              "sample": "035e4f2a-8d9b-4d93-950b-1a1eebbb9539"
            },
            "event": {
              "type": "string",
              "description": "event (string)",
              "sample": "appsthink_crm:field:email:added"
            },
            "module": {
              "type": "string",
              "description": "module (string)",
              "sample": "appsthink_crm"
            },
            "domain": {
              "type": "string",
              "description": "domain (string)",
              "sample": "appsthink_crm"
            },
            "version": {
              "type": "integer",
              "description": "version (integer)",
              "sample": 1
            },
            "detail": {
              "type": "object",
              "description": "detail (object)",
              "sample": {
                "field": "email",
                "module": "appsthink_crm",
                "value": "sca"
              }
            },
            "ts": {
              "type": "integer",
              "description": "ts (integer)",
              "sample": 1766347215683
            },
            "producer": {
              "type": "object",
              "description": "producer (object)",
              "sample": {
                "service": "crud-ui",
                "instance": "localhost:8001"
              }
            },
            "actor": {
              "type": "object",
              "description": "actor (object)",
              "sample": {
                "user": "Admin",
                "role": "admin",
                "group": "Administrators"
              }
            },
            "status": {
              "type": "string",
              "description": "status (string)",
              "sample": "published"
            },
            "attempts": {
              "type": "integer",
              "description": "attempts (integer)",
              "sample": 0
            },
            "level": {
              "type": "string",
              "description": "level (string)",
              "sample": "technical"
            },
            "field": {
              "type": "string",
              "description": "field (string)",
              "sample": "email"
            },
            "canonicalEvent": {
              "type": "string",
              "description": "canonicalEvent (string)",
              "sample": "appsthink_crm:email:added"
            },
            "publishedTs": {
              "type": "integer",
              "description": "publishedTs (integer)",
              "sample": 1766347215480
            }
          }
        }
      ],
      "variableMappings": {}
    }
  },
  "capabilities": {
    "VendorManagement": {
      "id": "VendorManagement",
      "name": "Vendor Management",
      "description": "Manage vendor relationships and transactions",
      "actions": [
        "ReconcileInvoice",
        "ApproveInvoice"
      ]
    },
    "InventoryManagement": {
      "id": "InventoryManagement",
      "name": "Inventory Management",
      "description": "Manage inventory levels and movements",
      "actions": [
        "AdjustInventory",
        "TransferInventory"
      ]
    },
    "ApprovalManagement": {
      "id": "ApprovalManagement",
      "name": "Approval Management",
      "description": "Manage approval workflows and decisions",
      "actions": [
        "ApproveInvoice",
        "ApprovePO",
        "RejectInvoice"
      ]
    }
  }
}